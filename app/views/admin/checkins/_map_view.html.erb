<script src="http://maps.google.com/maps/api/js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gmaps.js/0.4.24/gmaps.min.js"></script>
<div id="map"></div>
<script>
  $(function() {
    var overlays = [];

    var map = new GMaps({
      el: '#map',
      lat: -39.2066857,
      lng: -71.572913,
      zoom: 4,
    });

    map.addListener('zoom_changed', function() {
      clearOverlays();
      var zoom = map.map.getZoom();
      if (zoom <= 4) { drawBigOverlays() }
      if (5 <= zoom && zoom <= 10) { drawNormalOverlays() }
      if (zoom > 10) { drawSmallOverlays() }
    });

    var clearOverlays = function() {
      for (var i = 0; i < overlays.length; i++) {
        overlays[i].setMap(null);
      }
    }

    var drawBigOverlays = function() {
      overlays.push(map.drawOverlay({
        lat: -39.2066857,
        lng: -71.572913,
        content: '<div class="big-over overlay green">53,000</div>'
      }));
    }

    var drawNormalOverlays = function() {
      overlays.push(map.drawOverlay({
        lat: -39.2066857,
        lng: -71.572913,
        content: '<div class="normal-over overlay yellow">14,000</div>'
      }));
    }

    var drawSmallOverlays = function() {
      overlays.push(map.drawOverlay({
        lat: -39.2066857,
        lng: -71.572913,
        content: '<div class="small-over overlay red">500</div>'
      }));
    }

    drawBigOverlays();
  });
</script>
